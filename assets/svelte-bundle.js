!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,l;function i(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function u(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(t,e,n){t.$$.on_destroy.push(u(e,n))}function d(t){return null==t?"":t}function f(t,e,n){return t.set(n),e}function h(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function w(){return b(" ")}function _(){return b("")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function L(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function A(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function C(t){l=t}function q(t){(function(){if(!l)throw new Error("Function called outside component initialization");return l})().$$.on_mount.push(t)}const N=[],O=[];let P=[];const j=[],I=Promise.resolve();let z=!1;function F(){z||(z=!0,I.then(T))}function B(t){P.push(t)}const D=new Set;let H=0;function T(){if(0!==H)return;const t=l;do{try{for(;H<N.length;){const t=N[H];H++,C(t),U(t.$$)}}catch(t){throw N.length=0,H=0,t}for(C(null),N.length=0,H=0;O.length;)O.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];D.has(e)||(D.add(e),e())}P.length=0}while(N.length);for(;j.length;)j.pop()();z=!1,D.clear(),C(t)}function U(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const M=new Set;function R(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];P.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),P=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(c,s,i,u,a,d,f,h=[-1]){const p=l;C(c);const m=c.$$={fragment:null,ctx:[],props:d,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:s.target||p.$$.root};f&&f(m.root);let v=!1;if(m.ctx=i?i(c,s.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return m.ctx&&a(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),v&&function(t,e){-1===t.$$.dirty[0]&&(N.push(t),F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(c,t)),e})):[],m.update(),v=!0,o(m.before_update),m.fragment=!!u&&u(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(g)}else m.fragment&&m.fragment.c();s.intro&&((y=c.$$.fragment)&&y.i&&(M.delete(y),y.i(b))),function(t,n,c,s){const{fragment:l,after_update:i}=t.$$;l&&l.m(n,c),s||B((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(B)}(c,s.target,s.anchor,s.customElement),T()}var y,b;C(p)}class X{$destroy(){R(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function K(t,e){return{subscribe:G(t,e).subscribe}}function G(e,n=t){let o;const r=new Set;function s(t){if(c(e,t)&&(e=t,o)){const t=!Y.length;for(const t of r)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,l=t){const i=[c,l];return r.add(i),1===r.size&&(o=n(s)||t),c(e),()=>{r.delete(i),0===r.size&&o&&(o(),o=null)}}}}function J(e,n,c){const s=!Array.isArray(e),l=s?[e]:e,i=n.length<2;return K(c,(e=>{let c=!1;const a=[];let d=0,f=t;const h=()=>{if(d)return;f();const o=n(s?a[0]:a,e);i?e(o):f=r(o)?o:t},p=l.map(((t,e)=>u(t,(t=>{a[e]=t,d&=~(1<<e),c&&h()}),(()=>{d|=1<<e}))));return c=!0,h(),function(){o(p),f(),c=!1}}))}const Q="http://localhost:1111/products";async function V(t,e){const n=[],o=await fetch(`${Q}/${e}/${t}`,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}),r=await o.json();return n.push(...r),n}function Z(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const tt=K(null,(function(t){t(Z());const e=()=>{t(Z())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));J(tt,(t=>t.location));const et=J(tt,(t=>t.querystring));async function nt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await(F(),I),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=("#"==t.charAt(0)?"":"#")+t}function ot(t,e,n){const o=t.slice();return o[25]=e[n],o}function rt(t,e,n){const o=t.slice();return o[22]=e[n],o}function ct(t){let e,n,o,r,c=t[4].length+"";return{c(){e=v("span"),n=b("("),o=b(c),r=b(")"),x(e,"class","product-count svelte-bkhypw")},m(t,c){p(t,e,c),h(e,n),h(e,o),h(e,r)},p(t,e){16&e&&c!==(c=t[4].length+"")&&S(o,c)},d(t){t&&g(e)}}}function st(t){let e,n,o;return{c(){e=y("svg"),n=y("circle"),o=y("circle"),x(n,"class","bg svelte-bkhypw"),x(o,"class","fg svelte-bkhypw"),x(e,"width","24"),x(e,"height","24"),x(e,"viewBox","0 0 24 24"),x(e,"class","circular-progress svelte-bkhypw"),L(e,"--progress",t[3])},m(t,r){p(t,e,r),h(e,n),h(e,o)},p(t,n){8&n&&L(e,"--progress",t[3])},d(t){t&&g(e)}}}function lt(t){let e,n=t[4],o=[];for(let e=0;e<n.length;e+=1)o[e]=ft(ot(t,n,e));let r=null;return n.length||(r=ut(t)),{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_(),r&&r.c()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);p(t,e,n),r&&r.m(t,n)},p(t,c){if(6166&c){let s;for(n=t[4],s=0;s<n.length;s+=1){const r=ot(t,n,s);o[s]?o[s].p(r,c):(o[s]=ft(r),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length,!n.length&&r?r.p(t,c):n.length?r&&(r.d(1),r=null):(r=ut(t),r.c(),r.m(e.parentNode,e))}},d(t){m(o,t),t&&g(e),r&&r.d(t)}}}function it(e){let n,o=Array(6),r=[];for(let t=0;t<o.length;t+=1)r[t]=ht(rt(e,o,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=_()},m(t,e){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(t,e);p(t,n,e)},p:t,d(t){m(r,t),t&&g(n)}}}function ut(t){let e;function n(t,e){return t[2]?dt:at}let o=n(t),r=o(t);return{c(){r.c(),e=_()},m(t,n){r.m(t,n),p(t,e,n)},p(t,c){o===(o=n(t))&&r?r.p(t,c):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&g(e)}}}function at(t){let e,n,o,r,c,s;return{c(){e=v("div"),n=v("p"),o=b("Keine Produkte für "),r=b(t[1]),c=b(" gefunden."),s=w(),x(e,"class","col")},m(t,l){p(t,e,l),h(e,n),h(n,o),h(n,r),h(n,c),h(e,s)},p(t,e){2&e&&S(r,t[1])},d(t){t&&g(e)}}}function dt(e){let n,r,c,s,l,i,u,a,d,f;return{c(){n=v("div"),r=v("p"),c=b("Suche zum Beispiel nach "),s=v("a"),s.textContent='"Westside Harp"',l=b("\n            oder\n            "),i=v("a"),i.textContent='"Innova Destroyer"',u=b("."),a=w(),x(s,"href",null),x(i,"href",null),x(n,"class","col")},m(t,o){p(t,n,o),h(n,r),h(r,c),h(r,s),h(r,l),h(r,i),h(r,u),h(n,a),d||(f=[$(s,"click",k(e[17])),$(i,"click",k(e[18]))],d=!0)},p:t,d(t){t&&g(n),d=!1,o(f)}}}function ft(t){let e,n,o,r,c,s,l,u,a,f,m,y,_,$,k,E,L,A,C,q,N,O,P,j,I,z,F,B=t[25].title+"",D=t[11][t[25].stockStatus]+"",H=t[25].price+"";return{c(){e=v("div"),n=v("div"),o=v("div"),r=v("a"),c=v("img"),a=w(),f=v("div"),m=v("h2"),y=v("a"),_=b(B),k=w(),E=v("p"),L=v("span"),A=b(D),q=w(),N=v("strong"),O=b(H),P=b(" €"),j=w(),I=v("img"),F=w(),i(c.src,s=t[25].image||"/assets/images/image-not-found.jpg")||x(c,"src",s),x(c,"alt",l=t[25].title),x(c,"loading","lazy"),x(c,"width","200"),x(c,"height","200"),x(r,"href",u=t[25].url),x(r,"target","_blank"),x(r,"class","article__image svelte-bkhypw"),x(o,"class","article__head"),x(y,"href",$=t[25].url),x(y,"target","_blank"),x(y,"class","svelte-bkhypw"),x(m,"class","article__title svelte-bkhypw"),x(L,"class",C=d(`inventory status-${t[25].stockStatus}`)+" svelte-bkhypw"),i(I.src,z=t[25].store)||x(I,"src",z),x(I,"class","store-logo svelte-bkhypw"),x(I,"alt","Store Logo"),x(f,"class","article__content"),x(n,"class","article__inner"),x(e,"class","article col col-4 col-d-6 col-t-12")},m(t,s){p(t,e,s),h(e,n),h(n,o),h(o,r),h(r,c),h(n,a),h(n,f),h(f,m),h(m,y),h(y,_),h(f,k),h(f,E),h(E,L),h(L,A),h(E,q),h(E,N),h(N,O),h(N,P),h(E,j),h(E,I),h(e,F)},p(t,e){16&e&&!i(c.src,s=t[25].image||"/assets/images/image-not-found.jpg")&&x(c,"src",s),16&e&&l!==(l=t[25].title)&&x(c,"alt",l),16&e&&u!==(u=t[25].url)&&x(r,"href",u),16&e&&B!==(B=t[25].title+"")&&S(_,B),16&e&&$!==($=t[25].url)&&x(y,"href",$),16&e&&D!==(D=t[11][t[25].stockStatus]+"")&&S(A,D),16&e&&C!==(C=d(`inventory status-${t[25].stockStatus}`)+" svelte-bkhypw")&&x(L,"class",C),16&e&&H!==(H=t[25].price+"")&&S(O,H),16&e&&!i(I.src,z=t[25].store)&&x(I,"src",z)},d(t){t&&g(e)}}}function ht(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="skeleton-image svelte-bkhypw"></div> \n        <div class="skeleton-text svelte-bkhypw"></div> \n      ',x(n,"class","skeleton col col-4 col-d-6 col-t-12 svelte-bkhypw")},m(t,e){p(t,n,e)},p:t,d(t){t&&g(n)}}}function pt(e){let n,r,c,s,l,i,u,a,d,f,m,y,_,S,L,C,q;function N(t,e){return t[0]<t[9].length?st:t[4].length?ct:void 0}let O=N(e),P=O&&O(e);function j(t,e){return t[6]&&t[0]<t[9].length&&0===t[4].length?it:lt}let I=j(e),z=I(e);return{c(){n=v("form"),r=v("input"),c=w(),s=v("button"),s.textContent="Suchen",l=w(),i=v("div"),u=v("h2"),a=b("Produkte\n    "),P&&P.c(),d=w(),f=v("select"),m=v("option"),m.textContent="Standard",y=v("option"),y.textContent="Preis aufsteigend",_=v("option"),_.textContent="Preis absteigend",S=w(),L=v("div"),z.c(),x(r,"type","text"),x(r,"class","search__text svelte-bkhypw"),x(r,"placeholder","Suchen …"),x(s,"type","submit"),x(s,"class","button button--primary"),x(n,"class","search__group svelte-bkhypw"),x(u,"class","svelte-bkhypw"),m.__value="default",m.value=m.__value,y.__value="price-ascending",y.value=y.__value,_.__value="price-descending",_.value=_.__value,x(f,"class","svelte-bkhypw"),void 0===e[5]&&B((()=>e[16].call(f))),x(i,"class","products-headline svelte-bkhypw"),x(L,"class","row animate")},m(t,o){p(t,n,o),h(n,r),E(r,e[1]),h(n,c),h(n,s),p(t,l,o),p(t,i,o),h(i,u),h(u,a),P&&P.m(u,null),h(i,d),h(i,f),h(f,m),h(f,y),h(f,_),A(f,e[5],!0),p(t,S,o),p(t,L,o),z.m(L,null),C||(q=[$(r,"input",e[14]),$(s,"click",k(e[15])),$(f,"change",e[16]),$(f,"change",e[13])],C=!0)},p(t,[e]){2&e&&r.value!==t[1]&&E(r,t[1]),O===(O=N(t))&&P?P.p(t,e):(P&&P.d(1),P=O&&O(t),P&&(P.c(),P.m(u,null))),32&e&&A(f,t[5]),I===(I=j(t))&&z?z.p(t,e):(z.d(1),z=I(t),z&&(z.c(),z.m(L,null)))},i:t,o:t,d(t){t&&g(n),t&&g(l),t&&g(i),P&&P.d(),t&&g(S),t&&g(L),z.d(),C=!1,o(q)}}}function gt(t,e){const n=[...t].sort(((t,e)=>parseFloat(t.price)<parseFloat(e.price)?1:parseFloat(t.price)>=parseFloat(e.price)?-1:0));return e?n.reverse():n}function mt(t,e,n){let o,r,c,s,l;a(t,et,(t=>n(20,r=t)));const i=G([]);a(t,i,(t=>n(4,c=t)));const u=G(!1);a(t,u,(t=>n(6,l=t)));let d=[],h=!0;const p=["chooseyourdisc","insidethecircle","frisbeeshop","discgolfstore","crosslap","thrownatur"];let g=p.length;const m=G(localStorage.sort||"default");a(t,m,(t=>n(5,s=t))),m.subscribe((t=>localStorage.sort=t));let v="";const y=async()=>{if(!v)return nt("/"),n(2,h=!0),i.set([]);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"product-search",query:v}),d=[],n(2,h=!1),nt(`/?q=${encodeURIComponent(v)}`),u.set(!0),console.log("$loading:",l),i.set([]),n(0,g=0);for(const t of p){const e=await V(v,t);i.update((t=>[...t,...e])),n(0,g++,g),d.push(...e),b()}u.set(!1),console.log("$loading:",l),console.log("$products.length:",c.length)},b=()=>f(i,c="price-descending"===s?gt(c):"price-ascending"===s?gt(c,!0):d,c);q((async()=>{n(1,v=new URLSearchParams(r).get("q")||""),await y()}));return t.$$.update=()=>{2&t.$$.dirty&&n(1,v=v.toLowerCase()),1&t.$$.dirty&&n(3,o=parseInt(g/p.length*100))},[g,v,h,o,c,s,l,i,u,p,m,{available:"Auf Lager",unavailable:"Nicht auf Lager",unknown:"Unbekannt"},y,b,function(){v=this.value,n(1,v)},()=>y(),function(){s=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),m.set(s)},()=>{n(1,v="Westside Harp"),y()},()=>{n(1,v="Innova Destroyer"),y()}]}class vt extends X{constructor(t){super(),W(this,t,mt,pt,c,{})}}document.querySelector("#product-search-app")&&new vt({target:document.querySelector("#product-search-app")})}();
//# sourceMappingURL=svelte-bundle.js.map
